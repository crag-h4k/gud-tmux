##### Cross-platform clipboard #####
# Built-in OSC52 integration
set -g set-clipboard on

# Detect fallback copy command

if -b 'command -v wl-copy >/dev/null 2>&1' \
  'set -g @copy_cmd "wl-copy"'

if -b 'command -v xclip >/dev/null 2>&1' \
  'set -g @copy_cmd "xclip -selection clipboard"'

if -b 'command -v pbcopy >/dev/null 2>&1' \
  'set -g @copy_cmd "pbcopy"'

if -b '[ -z "#{@copy_cmd}" ]' \
  'set -g @copy_cmd ""'

# 3. Bindings
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel '#{?@copy_cmd,#{@copy_cmd},cat}'
bind -T copy-mode-vi Y send-keys -X copy-pipe '#{?@copy_cmd,#{@copy_cmd},cat}'
bind -T copy-mode     C-c send-keys -X copy-pipe-and-cancel '#{?@copy_cmd,#{@copy_cmd},cat}'
